#!/usr/bin/env coffee

doWhenPageReady = (url,callback) ->
    require('request').get(url)
    .on 'response', (response) ->
      if response.statusCode is 200
        callback url
      else
        console.log "Page not ready yet"
        setTimeout(->
          doWhenPageReady(url, callback)
        , 2000)
    .on 'error', (error) ->
      console.log error


doWhenPageReady 'http://danielsiwiec.github.io/demo/', -> console.log 'ready'
